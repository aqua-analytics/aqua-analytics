#!/bin/bash

# Aqua-Analytics Premium ë¡œì»¬ ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ (macOS/Linux)

echo ""
echo "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"
echo "â–ˆâ–ˆ                                                            â–ˆâ–ˆ"
echo "â–ˆâ–ˆ           ğŸ§ª Aqua-Analytics Premium                        â–ˆâ–ˆ"
echo "â–ˆâ–ˆ              ë¡œì»¬ ì„œë²„ ì‹œì‘                                â–ˆâ–ˆ"
echo "â–ˆâ–ˆ                                                            â–ˆâ–ˆ"
echo "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"
echo ""

# ê°€ìƒí™˜ê²½ í™•ì¸
if [ ! -d "aqua_env" ]; then
    echo "âŒ ê°€ìƒí™˜ê²½ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    echo ""
    echo "ì²˜ìŒ ì‹¤í–‰ì´ì‹œë¼ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”:"
    echo "  python3 -m venv aqua_env"
    echo "  source aqua_env/bin/activate"
    echo "  pip install -r requirements.txt"
    echo ""
    exit 1
fi

echo "âœ… ê°€ìƒí™˜ê²½ í™œì„±í™” ì¤‘..."
source aqua_env/bin/activate

echo ""
echo "ğŸŒ ì„œë²„ ì ‘ì† ì •ë³´:"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "   ë¡œì»¬ ì ‘ì†: http://localhost:8501"

# IP ì£¼ì†Œ í™•ì¸ (macOS)
IP=$(ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}' | head -1)
if [ ! -z "$IP" ]; then
    echo "   ë„¤íŠ¸ì›Œí¬ ì ‘ì†: http://$IP:8501"
fi

echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo ""

echo "ğŸš€ Aqua-Analytics ì„œë²„ ì‹œì‘ ì¤‘..."
echo ""
echo "âš ï¸  ì„œë²„ë¥¼ ì¤‘ì§€í•˜ë ¤ë©´ Ctrl+Cë¥¼ ëˆ„ë¥´ì„¸ìš”."
echo ""

# Streamlit ì‹¤í–‰
streamlit run aqua_analytics_premium.py --server.address 0.0.0.0 --server.port 8501 --server.headless true

echo ""
echo "ì„œë²„ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."